{"version":3,"file":"index-BwpVmnO-.js","sources":["../../src/components/timeline/directives.ts","../../src/store/store.ts","../../src/assets/icon.jpg","../../config/devConfig.ts","../../config/prodConfig.ts","../../config/config.ts","../../src/utils/request.ts","../../src/api/timeline.ts","../../src/api/timeline.config_tpl.ts","../../src/components/timeline/renderTimeline.ts","../../src/utils/record.ts","../../src/components/timeline/timeline.vue","../../src/components/cards/cardNews.vue","../../config/styleConfig.ts","../../src/components/earth/earth.vue","../../src/router/router.ts","../../src/main.ts"],"sourcesContent":["import { watchEffect, reactive } from 'vue';\nconst renderFlag = (el, binding) => {\n    const { flag, timeline, refreshFlag, index } = binding.value\n    const marker = el.querySelector('div.marker');\n    Object.assign(el.style, {\n        \"left\": flag[\"position\"] + 'px',\n        \"height\": timeline[\"flagHeight\"]\n    })\n    const zIndex = timeline.activeFlag == index ? 999 : 10 - index\n    Object.assign(marker.style, {\n        \"top\": flag[\"layer\"] + 'px',\n        \"width\": timeline[\"flagWidth\"] + 'px',\n        \"z-index\": zIndex,\n        // \"background\": \"background: rgba(79, 251, 223, 0.8);\"\n    })\n}\n\nconst dragTimeline = (el, binding) => {\n   //TODO: 拖拽逻辑\n}\n\nexport const TimelineFlag = {\n    updated(el, binding) {\n        renderFlag(el, binding)\n    }\n}\n\nexport const TimelineDrag = {\n    updated(el, binding) {\n        dragTimeline(el, binding)\n    }\n}","import { createStore } from 'vuex';\n\nconst content = {\n    namespaced: true,\n    state: {\n        preLocationName: '',\n        locationName: '',\n        preLocation: [116, 40],\n        location: [116, 40],\n        content: ''\n    },\n    mutations: {\n        updateContent(state, data) {\n            const { content, location, locationName } = data;\n            state.content = content;\n            state.preLocation = state.location\n            state.location = location;\n            state.preLocationName = state.locationName\n            state.locationName = locationName\n        }\n    }\n};\n\nconst timeline = {\n    namespaced: true,\n    state: {\n        msgType: '',\n        updateData: {}\n\n    },\n    mutations: {\n        updateTimeline(state, data) {\n            const { msgType, updateData } = data;\n            state.msgType = msgType;\n            state.updateData = updateData;\n        }\n    }\n};\n\nexport default createStore({\n    modules: {\n        content,\n        timeline\n    },\n});","export default \"__VITE_ASSET__BCP_ATaR__\"","const config = {\n    baseUrl: 'http://localhost:8012',\n}\nexport default { ...config }\n","const config = {\n    // baseUrl: 'http://localhost:8012',\n    baseUrl: 'http://101.42.16.7',\n}\nexport default { ...config }\n","import devConfig from \"./devConfig.ts\";\nimport prodConfig from \"./prodConfig.ts\";\n\nconst getConfig = () => {\n    switch (process.env.NODE_ENV) {\n        case \"development\":\n            return devConfig;\n        case \"production\":\n            return prodConfig;\n        default:\n            return devConfig;\n    }\n};\n\nconst config = getConfig();\n\nexport default config;","import axios from 'axios'\nimport config from '@/../config/config.ts'\n\nconst request = axios.create({\n    baseURL: `${config.baseUrl}/autumnRiver`,\n    timeout: 30000\n})\n\nconst errorHandler = error => {\n    //TODO: 错误处理\n}\n\nrequest.interceptors.request.use(config => {\n    return config\n}, errorHandler)\n\nrequest.interceptors.response.use(response => {\n    return Promise.resolve(response.data)\n}, errorHandler)\n\nexport default request\n","import request from \"@/utils/request.ts\";\n\nexport async function getTimeline(): Promise<[]> {\n    return request({\n        url: '/geotime/technews',\n        method: 'post'\n    })\n}","const timelineConfig = {\n\t\"timeline\": {\n\t\t\"containerId\": \"timeline_container\",\n\t\t\"containerWidth\": null,\n\t\t\"containerHeight\": 220,\n\t\t\"activeFlag\": 0,\n\t\t\"offset\": 0,\n\t\t\"flagWidth\": 150,\n\t\t\"init\": false,\n\t\t\"rulerNum\": 10,\n\t\t\"baseLineOffset\": 0.5,\n\t\t\"flagOffsetWidth\": 1,\n\t\t\"rulerMarkerWidth\": 70,\n\t\t\"rulerMarkers\": [\n\t\t\t{\n\t\t\t\t\"time\": null,\n\t\t\t\t\"position\": null,\n\t\t\t\t\"timeType\": null,\n\t\t\t\t\"content\": null,\n\t\t\t}\n\t\t],\n\t\t\"control\": {\n\t\t\t\"startDelay\": 500,\n\t\t\t\"record\": false,\n\t\t\t\"duration\": 2000,\n\t\t},\n\t},\n\t\"flags\": [\n\t\t{\n\t\t\t\"time\": \"2023-06-10\",\n\t\t\t\"duration\": 18,\n\t\t\t\"location\": [\n\t\t\t\t104.07,\n\t\t\t\t30.67\n\t\t\t],\n\t\t\t\"locationName\": \"成都\",\n\t\t\t\"title\": \"成都\",\n\t\t\t\"subtitle\": \"武侯祠、大熊猫馆\",\n\t\t\t\"organization\": \"国家博物馆\",\n\t\t\t\"content\": \"感慨于李冰父子修筑都江堰的千秋之功，在都江堰赋诗一首：冰公掎石洲，碧水分中流\\n枯丰自能适，兴衰水不忧\\n川民瞻缮葺，蜀王几无丘？\\n千载滋天府，烟云笼未休\",\n\t\t\t\"imgs\": [\"http://127.0.0.1:8080/1.jpg\", \"http://127.0.0.1:8080/2.jpg\", \"http://127.0.0.1:8080/0.jpg\"],\n\t\t\t\"website\": \"\",\n\t\t\t\"titleUrl\": \"\",\n\t\t\t\"row\": 1,\n\t\t\t\"order\": 0\n\t\t}\n\t]\n\n}\n\nexport default timelineConfig;","\nconst ONEDAYMILLSECONDS = 24 * 60 * 60 * 1000\nexport interface TimelineData {\n    timeline: {\n        containerId: string;\n        containerWidth: number;\n        containerHeight: number;\n        activeFlag: number;\n        offset: number;\n        flagWidth: number;\n        init: boolean;\n        baseLineOffset: number;\n        flagOffsetWidth: number;\n        ruler?: number;\n        rulerNum: number;\n        rulerMarkerWidth: number;\n        rulerMarkers: {\n            content: null | String;\n            timeType: null | String;\n            time: null | string;\n            position: null | number;\n        }[];\n        control: {\n            startDelay: number,\n            record: boolean,\n            duration: number,\n        },\n    };\n    flags: {\n        time: string;\n        duration: number;\n        location: number[];\n        locationName: null | string;\n        title: string;\n        subtitle: string;\n        organization: string;\n        content: string;\n        imgs: string[];\n        website: string;\n        titleUrl: string;\n        row: number | \"middle\" | null;\n        order: number;\n    }[];\n}\nexport class renderTimeline {\n    private entity;\n    private ruler;\n    private flagLayer = {\n        \"top\": null,\n        \"middle\": null,\n        \"bottom\": null\n    }\n    private dateMap = {}\n\n    public render(timelineData: TimelineData) {\n        let timeline = timelineData[\"timeline\"];\n        this.time2Date(timelineData);\n        const container = document.getElementById(`${timeline['containerId']}`)\n        timeline[\"containerWidth\"] = container.offsetWidth;\n        timeline[\"containerHeight\"] = timeline['containerHeight'];\n        timeline[\"offset\"] = 0;\n        timeline[\"offsetOld\"] = 0;\n\n        timeline[\"flagHeight\"] = timeline[\"containerHeight\"] * 0.95 * 0.65 / 3;\n        timeline[\"flagMargin\"] = timeline[\"containerHeight\"] * 0.9 * 0.35 / 4;\n\n        this.flagLayer[\"middle\"] = timeline[\"flagMargin\"] * 2 + timeline[\"flagHeight\"];\n        this.flagLayer[\"top\"] = timeline[\"flagMargin\"];\n        this.flagLayer[\"bottom\"] = timeline[\"flagMargin\"] * 3 + timeline[\"flagHeight\"] * 2;\n        this.renderFlags(timelineData);\n    }\n\n    public renderFlags(timelineData: TimelineData) {\n        let timeline = timelineData[\"timeline\"];\n        let flags = timelineData[\"flags\"];\n        if (!timeline[\"ruler\"]) {\n            this.ruler = this.calRuler(flags, timeline[\"containerWidth\"] * (1 - timeline['baseLineOffset']) - timeline[\"flagWidth\"] * timeline[\"flagOffsetWidth\"]);\n            timeline[\"ruler\"] = this.ruler;\n        } else {\n            this.ruler = timeline[\"ruler\"];\n        }\n\n        this.setRows(flags, timeline);\n        this.renderRulerMarkers(timelineData);\n    }\n\n    public positionFlags(timelineData) {\n        let timeline = timelineData[\"timeline\"];\n        let flags = timelineData[\"flags\"];\n        let offset = flags[0][\"position\"] - flags[timeline[\"activeFlag\"]][\"position\"];\n        timeline['offsetOld'] = timeline['offset'];\n        timeline[\"offset\"] = offset;\n        this.renderRulerMarkers(timelineData);\n    }\n\n    private time2Date(timelineData) {\n        const flags = timelineData['flags']\n        flags.forEach((item) => {\n            item['time'] = new Date(item['time'])\n        })\n    }\n\n    private renderRulerMarkers(timelineData) {\n        var timeline = timelineData[\"timeline\"];\n        var flags = timelineData[\"flags\"];\n        this.sortFlags(flags);\n        this.genRulerMarkerTime(timeline, flags);\n    }\n\n    private genRulerMarkerTime(timeline, flags) {\n        this.dateMap = {}\n        //days是半个可视时间轴的长度对应的天数，timeLevel是ruler级别，baseDay是drag块0点对应的时间相距公元1年的天数。\n        var days = this.calInterval(flags[0][\"time\"], flags[flags.length - 1][\"time\"]);\n\n        var timeLevel = null;\n        if (days >= 365 * 100) {\n            timeLevel = \"century\"\n        } else if (days >= 365 * 50) {\n            timeLevel = \"fiftyyear\";\n        } else if (days >= 365 * 20) {\n            timeLevel = \"tweentyyear\";\n        } else if (days >= 365 * 10) {\n            timeLevel = \"decade\";\n        } else if (days >= 365) {\n            timeLevel = \"year\";\n        } else if (days >= 30) {\n            timeLevel = \"month\";\n        } else if (days >= 1) {\n            timeLevel = \"day\"\n        }\n\n        //前端显示的第一个时间刻度距离公元1年1月1日有多少天\n        const baseDay = this.calBaseDay(timeline, flags);\n        const daysInterval = days / ((timeline[\"rulerNum\"] - 1) / 2);\n        const radius = daysInterval / 2;\n        var rulerMarkers = timeline[\"rulerMarkers\"];\n        for (let i = 0; i < timeline[\"rulerNum\"]; i++) {\n            let _rulerMarker = {\n                \"time\": null,\n                \"position\": null,\n                \"content\": null\n            };\n\n            rulerMarkers[i] = _rulerMarker;\n            rulerMarkers[i][\"time\"] = new Date();\n            rulerMarkers[i][\"time\"].setTime(baseDay.getTime() + i * daysInterval * ONEDAYMILLSECONDS);\n            if (Math.abs(this.calInterval(rulerMarkers[i][\"time\"], flags[timeline[\"activeFlag\"]][\"time\"])) <= radius) {\n                rulerMarkers[i][\"time\"].setTime(flags[timeline[\"activeFlag\"]][\"time\"].getTime());\n            }\n            rulerMarkers[i][\"position\"] = this.time2Position(rulerMarkers[i][\"time\"], flags, timeline) - timeline['rulerMarkerWidth'] * 0.5;//rulerMarkers[i][\"time\"] * timeline[\"ruler\"];\n            const { content, timeType } = this.time2Display(rulerMarkers[i][\"time\"]);\n            rulerMarkers[i][\"content\"] = content;\n            rulerMarkers[i][\"timeType\"] = timeType\n        }\n    }\n\n    private time2Display(dateObj) {\n        let year = dateObj.getFullYear();\n        let month = dateObj.getMonth() + 1;\n        let day = dateObj.getDate();\n        let content = '';\n        let timeType = ''\n        if (year < 0) {\n            content = \"BC\";\n            year = -year;\n        }\n        if (!this.dateMap[year]) {\n            this.dateMap[year] = true\n            content += `${year}年${month}月${day}日`;\n            timeType = 'year'\n        } else {\n            content += `${month}月${day}日`;\n            timeType = 'month'\n        }\n        return { content, timeType };\n    }\n\n    private calBaseDay(timeline, flags) {\n        //计算第一个日期和最后一个日期的天数差\n        const days = this.calInterval(flags[0][\"time\"], flags[flags.length - 1][\"time\"]);\n        //计算时间轴显示的第一个日期（要比第一个赋值日期更早）比赋值最后一个日期早的天数\n        const baseDay = new Date();\n        baseDay.setTime(flags[0]['time'].getTime() - days * ONEDAYMILLSECONDS);\n        return baseDay;\n    }\n\n    private time2Position(time, flags, timeline) {\n        const baseTime = flags[0][\"time\"];\n        const days = (time.getTime() - baseTime.getTime()) / ONEDAYMILLSECONDS;\n        const position = timeline[\"containerWidth\"] * (timeline['baseLineOffset']) + days * this.ruler;\n        return position;\n    }\n\n    private setRows(flags, timeline) {\n\n        var baseTime = flags[0][\"time\"];\n        flags.forEach((flag, index, flags) => {\n            // flag[\"position\"] = timeline[\"containerWidth\"] * 1.5 + this.calInterval(baseTime, flag[\"time\"]) * this.ruler;\n\n            flag[\"position\"] = this.time2Position(flag[\"time\"], flags, timeline);\n            if (index > 0 && this.calInterval(flags[index - 1][\"time\"], flag[\"time\"]) * this.ruler < timeline[\"flagWidth\"]) {\n                if (index > 1 && this.calInterval(flags[index - 2][\"time\"], flag[\"time\"]) * this.ruler < timeline[\"flagWidth\"]) {\n                    flag[\"row\"] = this.restRow(flags[index - 1][\"row\"], flags[index - 2][\"row\"]);\n                } else {\n                    flag[\"row\"] = this.nextRow(flags[index - 1][\"row\"]);\n                }\n            } else {\n                flag[\"row\"] = \"middle\";\n            }\n            flag[\"layer\"] = this.flagLayer[flag[\"row\"]];\n        });\n    }\n\n    private restRow(row1, row2) {\n        var rows = [\"middle\", \"top\", \"bottom\"];\n        let index = 3 - rows.indexOf(row1) - rows.indexOf(row2);\n        return rows[index];\n    }\n\n    private nextRow(row) {\n        var rows = [\"middle\", \"top\", \"bottom\"];\n        let index = (rows.indexOf(row) + 1) % 3;\n        return rows[index];\n    }\n\n    private sortFlags(flags) {\n        flags.sort((flag1, flag2) => {\n            return this.calTime(flag1[\"time\"]) - this.calTime(flag2[\"time\"]);\n        });\n        return flags;\n    }\n\n    /*interval单位是天*/\n    private calInterval(date1, date2) {\n        // 创建 Date 对象\n        const start = new Date(date1);\n        const end = new Date(date2);\n\n        // 计算总毫秒数\n        const timeDifference = end.getTime() - start.getTime();\n\n        // 将毫秒数转换为天数\n        const daysDifference = Math.ceil(timeDifference / ONEDAYMILLSECONDS);\n\n        return daysDifference;\n    }\n\n    /*以公元1年1月1日为起点，极端interval*/\n    private calTime(date) {\n        return this.calInterval('0001-01-01', date);\n    }\n\n    /*  一天对应的长度（day=>left） */\n    private calRuler(flags, timeWidth) {\n        this.sortFlags(flags);\n        let ruler = timeWidth / (this.calInterval(flags[0][\"time\"], flags[flags.length - 1][\"time\"]));\n        return ruler;\n    }\n\n}","// 导入必要的库\nimport { MediaRecorder } from 'extendable-media-recorder';\n\n// 定义存放录屏数据的数组\nlet recordedChunks = [];\n\n// 定义媒体录制器\nlet mediaRecorder;\nlet stream;\n\nconst recordVideo = async () => {\n    try {\n        // 获取屏幕共享流\n        stream = await navigator.mediaDevices.getDisplayMedia({\n            video: {\n                frameRate: { ideal: 12 },\n            },\n            // videoBitsPerSecond: 160000000,\n            audio: false,\n        });\n\n\n        // 创建媒体录制器\n        mediaRecorder = new MediaRecorder(stream, {\n            mimeType: 'video/webm;codecs=vp9',\n            videoBitsPerSecond: 1600000,\n        });\n\n        // 添加媒体录制器事件监听器\n        mediaRecorder.ondataavailable = (event) => {\n            // 将录制的数据添加到数组中\n            console.log('recording!!!')\n            console.log(event.data)\n            recordedChunks.push(event.data);\n        };\n\n        // 开始录制\n        mediaRecorder.start();\n\n    } catch (error) {\n        // 处理错误\n        console.log('recording error!!!')\n        console.error(error);\n    }\n}\n\nconst stopRecordVideo = async () => {\n    mediaRecorder.stop()\n    await new Promise(resolve => mediaRecorder.onstop = resolve);\n    const blob = new Blob(recordedChunks, { type: 'video/webm' });\n\n    // 创建一个下载链接\n    const url = URL.createObjectURL(blob);\n\n    // 创建一个下载按钮\n    const downloadLink = document.createElement('a');\n    downloadLink.href = url;\n    downloadLink.download = 'recording.webm';\n    downloadLink.click();\n\n    // 清理下载链接\n    stream.getTracks().forEach(track => track.stop());\n    URL.revokeObjectURL(url);\n\n    // 清理录制数据数组\n    recordedChunks = [];\n}\n\nexport { recordVideo, stopRecordVideo }","<template>\n    <div id=\"timeline_container\">\n        <div class=\"container_background\">\n            <div id=\"toolbox\">\n                <!-- <HomeTwoTone :style=\"{ fontSize: '20px' }\" @click=\"toolClick('home')\" /> -->\n                <GithubOutlined :style=\"{ fontSize: '20px', color: 'rgb(24, 144, 255)' }\"\n                    @click=\"toolClick('github')\" />\n                <PlayCircleTwoTone :style=\"{ fontSize: '20px' }\" @click=\"toolClick('play')\" v-if=\"!playing\" />\n                <PauseCircleTwoTone :style=\"{ fontSize: '20px' }\" @click=\"toolClick('stop')\" v-if=\"playing\" />\n                <PlusCircleTwoTone :style=\"{ fontSize: '20px' }\" @click=\"toolClick('magnify')\" />\n                <MinusCircleTwoTone :style=\"{ fontSize: '20px' }\" @click=\"toolClick('reduce')\" />\n            </div>\n            <div class=\"baseline_v\" :style=\"{ left: `${timeline['baseLineOffset'] * 100}%` }\"></div>\n            <div class=\"baseline_h\"></div>\n            <div class=\"dragable_container\" :style=\"{ left: timeline.offset + 'px' }\"\n                v-TimelineDrag=\"{ timeline: timeline, refreshFlag: refreshFlag }\">\n                <div class=\"flagwraper\">\n                    <div v-for=\"(flag, index) in flags\" :key=\"index\"\n                        v-TimelineFlag=\"{ flag: flag, timeline: timeline, refreshFlag: refreshFlag, index: index }\"\n                        class=\"timeflag\" @click=\"clickFlag(index)\">\n                        <MarkerShadow :title=\"flag['locationName']\" :subtitle=\"flag['organization']\"\n                            :isActive=\"index == timeline.activeFlag\" />\n                    </div>\n\n                    <div v-for=\"(rulermarker, i) in timeline.rulerMarkers\" :key=\"i\" class=\"rulermarker\"\n                        :style=\"{ left: rulermarker.position + 'px' }\"\n                        :class=\"{ 'year_type': rulermarker.timeType == 'year' }\">\n                        {{ rulermarker.content }}\n                    </div>\n                </div>\n                <div class=\"suffix\">\n                    <div class=\"asklike\">\n                        <img src=\"@/assets/icon.jpg\">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup lang='ts'>\nimport { getTimeline } from '@/api/timeline.ts';\nimport { ref, reactive, onMounted, onBeforeMount } from 'vue';\n// import timelineConfig from '@/api/timeline.config.ts';\nimport timelineConfig from '@/api/timeline.config_tpl.ts';\nimport { renderTimeline, TimelineData } from '@/components/timeline/renderTimeline.ts';\nimport { PlusCircleTwoTone, MinusCircleTwoTone, HomeTwoTone, PlayCircleTwoTone, PauseCircleTwoTone, GithubOutlined } from '@ant-design/icons-vue';\nimport { useStore } from 'vuex';\nimport { useRoute, useRouter } from 'vue-router';\nimport { recordVideo, stopRecordVideo } from '@/utils/record.ts';\n// import Marker from './markers/markerSimple.vue';\nimport MarkerShadow from '@/components/timeline/markers/markerShadow.vue';\nconst ANIMATEDURATION = 2700 + 2000 + 550\nconst router = useRouter()\n\nlet timelineData: TimelineData = structuredClone(timelineConfig);\nlet flags = timelineData[\"flags\"];\nlet timeline = timelineData[\"timeline\"];\nconst refreshFlag = ref(true)\nconst store = useStore();\nconst rt = new renderTimeline()\nlet playing = ref(false);\n\nonMounted(async () => {\n    await getTimelineData('2023-05-16')\n    await updateTimelineData()\n    // toolClick('play')\n})\n\nconst renderFlags = () => {\n    rt.render(timelineData);\n    refreshFlag.value = !refreshFlag.value\n    setTimeout(() => {\n        clickFlag(0)\n    }, 1000);\n\n}\nconst clickFlag = (index) => {\n    goToFlag(index);\n    refreshFlag.value = !refreshFlag.value\n    const flag = flags[index]\n    store.commit('content/updateContent', {\n        content: flag,\n        location: flag['location'],\n        locationName: flag['locationName']\n    });\n};\n\nconst goToFlag = (index) => {\n    timeline.activeFlag = index;\n    rt.positionFlags(timelineData);\n    timeline.init = true;\n};\n\nconst toolClick = async (type) => {\n    const factor = 1.5\n    if (type === 'magnify') {\n        timelineData.timeline.ruler *= factor;\n        timelineData.timeline.rulerNum *= factor\n    } else if (type === 'reduce') {\n        timelineData.timeline.ruler /= factor;\n        timelineData.timeline.rulerNum /= factor\n    } else if (type === 'home') {\n        router.replace({\n            name: 'news'\n        })\n    } else if (type == 'play') {\n        playing.value = true\n        if (timeline.control.record) {\n            await recordVideo();\n        }\n\n        setTimeout(() => {\n            play(0);\n        }, timeline.control.startDelay)\n\n    } else if (type == 'stop') {\n        if (timeline.control.record) {\n            await stopRecordVideo();\n        }\n\n        playing.value = false\n    } else if (type == 'github') {\n        window.location.href = 'https://github.com/sklongger/AI-timeline-geomap';\n    }\n    renderFlags();\n};\n\nconst orderFlags = () => {\n    let playOrder = []\n    flags.forEach((element, index) => {\n        playOrder.push({\n            order: element['order'],\n            index: index\n        })\n    });\n    playOrder.sort((a, b) => a.order - b.order)\n    return playOrder\n}\n\nconst play = (index) => {\n    const playOrder = orderFlags()\n    const flagIndex = playOrder[index]['index']\n    let duration;\n\n    if (timeline.control.record) {\n        duration = flags[flagIndex]['duration'] * 1000 + ANIMATEDURATION\n    } else {\n        duration = timeline.control.duration + ANIMATEDURATION\n    }\n    clickFlag(flagIndex);\n    setTimeout(() => {\n        if (timeline.control.record) {\n            index += 1\n        } else {\n            index = (index + 1) % flags.length\n        }\n\n        if (index != flags.length && playing.value) {\n            play(index)\n        } else {\n            toolClick('stop')\n        }\n\n    }, duration)\n}\n\nasync function preloadImages(urlList) {\n    urlList.forEach(async (url) => {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onload = () => resolve(img);\n            img.onerror = () => reject(new Error(`Failed to load image: ${url}`));\n            img.src = url;\n        });\n    })\n\n}\n\nasync function getTimelineData(date: string) {\n    timelineData = structuredClone(timelineConfig);\n    flags = timelineData[\"flags\"];\n    timeline = timelineData[\"timeline\"];\n    const data = await getTimeline()\n    const tpl = flags.pop()\n    let preloadList = []\n    data.forEach(element => {\n        tpl['time'] = element['date']\n        tpl['title'] = element['title']\n        tpl['subtitle'] = element['subtitle']\n        tpl['content'] = element['summary']\n        tpl['imgs'] = element['imgs']\n        tpl['location'] = element['location']\n        tpl['locationName'] = element['location_str']\n        tpl['organization'] = element['organization']\n        tpl['website'] = element['website']\n        tpl['titleUrl'] = element['title_url']\n        flags.push(JSON.parse(JSON.stringify(tpl)))\n        preloadList = [...preloadList, ...element['imgs']]\n    });\n    await preloadImages(preloadList)\n    refreshFlag.value = !refreshFlag.value\n    console.log(1)\n    renderFlags()\n    console.log(2)\n    \n    console.log(3)\n}\nasync function updateTimelineData() {\n    store.subscribe(async (mutation, state) => {\n        state = state.timeline\n        if (mutation.type === 'timeline/updateTimeline') {\n            const msgType = state.msgType\n            const updateData = state.updateData\n            console.log(msgType)\n            switch (msgType) {\n                case 'tech_news':\n                    await getTimelineData(updateData.date)\n                    break;\n                default:\n                    break;\n            }\n        }\n    })\n}\n</script>\n\n<style scoped>\n#timeline_container {\n\n    position: absolute;\n    bottom: 0px;\n    box-shadow: inset 0 10px 10px 0px rgba(255, 255, 255, 0.6);\n    background-size: 25px 25px;\n    background-image:\n        linear-gradient(to right, #ddd 1px, transparent 1px),\n        linear-gradient(to bottom, #ddd 1px, transparent 1px);\n\n    width: 100%;\n    height: 220px;\n    overflow: hidden;\n\n    .container_background {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        /* background: red; */\n        background: linear-gradient(to right top, rgba(158, 35, 234, 0.6), rgba(50, 147, 230, 0.5), rgba(51, 172, 170, 0.85));\n\n        #toolbox {\n            position: absolute;\n            top: 42%;\n            transform: translate(0%, -50%);\n            /* 使用translate属性水平垂直居中 */\n            font-size: 12px;\n            height: 76%;\n            width: 30px;\n            background: rgba(253, 254, 240, 0.8);\n            z-index: 100;\n            display: flex;\n            flex-direction: column;\n            /* 设置子元素纵向排列 */\n            justify-content: space-between;\n            padding: 20px 0;\n            box-shadow: 6px 6px 2px #ccc;\n        }\n\n        .baseline_v {\n            position: absolute;\n            height: 196px;\n            width: 1.5px;\n            left: 10%;\n            background: rgb(0, 0, 0, 0.8);\n            z-index: 100;\n        }\n\n        .baseline_h {\n            position: absolute;\n            bottom: 22px;\n            height: 1px;\n            width: 100%;\n            left: 0;\n            background: rgba(225, 225, 225, 1);\n            /* background: linear-gradient(to right top, rgba(51, 172, 170, 0.8), rgba(50, 147, 230, 0.2), rgba(158, 35, 234, 0.5)); */\n\n            z-index: 100;\n        }\n\n        .dragable_container {\n            cursor: move;\n            position: absolute;\n            height: 215px;\n            width: 130%;\n\n            .suffix {\n                .asklike {\n                    position: absolute;\n                    right: 0px;\n                    top: 50%;\n                    transform: translate(-130%, -50%);\n                    content: '';\n                    height: 160px;\n                    width: 160px;\n                    border-radius: 50%;\n\n                    img {\n                        width: 100%;\n                        height: 100%;\n                        border-radius: 50%;\n                    }\n                }\n            }\n\n            .rulermarker {\n                font-size: 8px;\n                position: absolute;\n                bottom: 0px;\n                z-index: 100;\n                height: 14px;\n                line-height: 12px;\n                color: rgba(255, 255, 255, 1);\n                font-weight: bold;\n                text-align: center;\n                /* left: 50%; */\n                width: 70px;\n                /* background: red; */\n                /* border-right: 1px solid black; */\n                overflow: hidden;\n\n                &::after {\n                    content: \"\";\n                    position: absolute;\n                    background: rgba(225, 225, 225, 1);\n                    width: 1px;\n                    height: 6px;\n                    bottom: 18px;\n                    /* left: 50%; */\n\n                }\n            }\n\n            .year_type {\n                font-size: 10px;\n                width: 70px;\n                height: 14px;\n                color: rgba(225, 225, 225, 1);\n                font-weight: 900;\n\n                &::after {\n                    content: \"\";\n                    position: absolute;\n                    background: rgba(225, 225, 225, 1);\n                    width: 2px;\n                    height: 8px;\n                    bottom: 16px;\n                    left: 50%;\n\n                }\n            }\n\n            .flagwraper {\n                height: 200px;\n\n                .timeflag {\n                    cursor: pointer;\n                    position: absolute;\n                }\n            }\n        }\n\n    }\n}\n\n#testbtn {\n    background: rgb(31, 180, 250);\n    color: #fff;\n    border-radius: 5px;\n    cursor: pointer;\n    width: 130px;\n    margin: 60px auto;\n}\n</style>","<template>\n    <transition name=\"card-fade\" class=\"card\">\n        <a-card hoverable v-show=\"cardShow\">\n            <template #cover>\n                <div class=\"img-container\">\n                    <div v-for=\"(imgSrc, index) in cardInfo.imgs\" :key=\"index\" class=\"img-item\">\n                        <img alt=\"example\" :src=\"imgSrc\" :style=\"{ 'max-width': 1000 / cardInfo.imgs.length + 'px' }\" />\n                    </div>\n                    <div class=\"calender\">\n                        <div class=\"year_month\">{{ date.yearMonth }}</div>\n                        <div class=\"day-container\">\n                            <div class=\"date\">{{ date.date }}</div>\n                            <div class=\"day\">{{ date.day }}</div>\n                        </div>\n                        <div class=\"tech-nice\">\n                            <div class=\"page-icon\" @click=\"turnPage('pre')\">\n                                <LeftSquareFilled style=\"color: rgb(24, 144, 255);\" />\n                            </div>\n                            <div class=\"suitable\">{{ date.suitable }}</div>\n                            <div class=\"page-icon\" @click=\"turnPage('next')\">\n                                <RightSquareFilled style=\"color: rgb(24, 144, 255);\" />\n                            </div>\n                        </div>\n                        <div class=\"introduction\">我们是秋水灌河团队，借助人工智能，每天更新近期全球范围有趣的科技进展。今日份科学请君小观</div>\n                    </div>\n                </div>\n\n            </template>\n            <div class=\"content-container\">\n                <div class=\"title\">\n                    {{ cardInfo.title }}\n                    <a class=\"from\" :href=\"cardInfo.titleUrl\" target=\"_blank\" v-if=\"cardInfo.website\">(转自{{\n                        cardInfo.website }})</a>\n                </div>\n                <div class=\"meta\">\n                    <div>{{ cardInfo.date }}</div>\n                    <div>{{ cardInfo.locationName }}</div>\n                    <div>{{ cardInfo.organization }}</div>\n                </div>\n                <div class=\"content\">\n                    <p v-for=\"content, index in cardInfo.content\" :key=\"index\">\n                        {{ content }}\n                    </p>\n                </div>\n            </div>\n        </a-card>\n    </transition>\n</template>\n\n<script setup lang=\"ts\">\nimport { message } from 'ant-design-vue';\nimport { useStore } from 'vuex';\nimport { ref, reactive, onMounted, onBeforeMount, watch } from 'vue';\nimport { LeftSquareFilled, RightSquareFilled } from '@ant-design/icons-vue';\n\nconst props = defineProps({\n    cardShow: {\n        type: Boolean,\n        default: false\n    }\n});\n\nconst store = useStore();\ninterface CardInfo {\n    title: string;\n    subtitle: string;\n    content: Array<string>;\n    imgs: Array<string>;\n    date: string;\n    locationName: string;\n    website: string;\n    titleUrl: string;\n    organization: string;\n}\ninterface Calender {\n    current: Date;\n    yearMonth: string;\n    date: string;\n    day: string;\n    suitable: string;\n}\n\nconst cardInfo: CardInfo = reactive({\n    title: \"\",\n    subtitle: \"\",\n    content: [],\n    imgs: [],\n    date: \"\",\n    locationName: \"\",\n    website: \"\",\n    titleUrl: \"\",\n    organization: \"耶鲁\"\n})\n\nlet date: Calender = reactive({\n    current: new Date(),\n    yearMonth: \"\",\n    date: \"\",\n    day: \"\",\n    suitable: \"\"\n});\n\nonMounted(async () => {\n    date = getDate()\n})\nconst suitable = ['宜亲近科技', '宜关注paper', '宜学习知识', '宜探查世界', '宜保持好奇', '宜开脑洞', '宜求索未知'];\nconst getDate: () => Calender = () => {\n    const today = new Date()\n    // format yyyy年mm月\n    const year = today.getFullYear();\n    const month = (today.getMonth() + 1).toString();\n    const yearMonth = year + '年' + month + '月';\n    //获取今天是几号\n    const date = today.getDate().toString();\n    const day = today.getDay();\n    const dayMap = ['日', '一', '二', '三', '四', '五', '六'];\n    const res: Calender = {\n        current: today,\n        yearMonth,\n        date,\n        day: '星期' + dayMap[day],\n        suitable: suitable[Math.floor(Math.random() * suitable.length)]\n    }\n    return res\n}\n\nconst turnPage = (type: 'pre' | 'next') => {\n    message.info('抱歉，此demo暂时尚未实时更新数据');\n    // let payload = new Date();\n    // if (type === 'pre') {\n    //     payload.setDate(date.current.getDate() - 1)\n    // } else {\n    //     payload.setDate(date.current.getDate() + 1)\n    // }\n    // store.commit('timeline/updateTimeline', {\n    //     msgType: 'tech_news',\n    //     // 字符串时间 yyyy-mm-dd，current日期往前推一天\n    //     updateData: {\n    //         date: payload.toLocaleDateString().split(' ')[0].replace(/\\//g, '-')\n    //     }\n    // })\n}\n\nwatch(() => props.cardShow, (newVal) => {\n    if (newVal) {\n        const state = store.state.content;\n        cardInfo.imgs = state.content.imgs;\n        cardInfo.content = state.content.content.split('。').map((item, index, origin) => {\n            if (index != origin.length - 1) {\n                item += '。'\n            }\n            return item\n        });\n        cardInfo.title = state.content.title;\n        cardInfo.subtitle = state.content.subtitle;\n        cardInfo.date = state.content.date;\n        cardInfo.locationName = state.content.locationName;\n        cardInfo.website = state.content.website;\n        cardInfo.titleUrl = state.content.titleUrl;\n        cardInfo.organization = state.content.organization;\n        date.suitable = suitable[Math.floor(Math.random() * suitable.length)]\n    }\n})\n</script>\n\n<style scoped>\n.card {\n    cursor: default;\n    padding: 4px;\n    background: white;\n    box-shadow: 6px 6px 6px #ccc;\n    border-radius: 10px;\n    background: #e5e5e5;\n    padding: 10px 10px 0 10px;\n\n    .content-container {\n        .title {\n            text-align: left;\n            font-size: 20px;\n            font-weight: bold;\n            margin-bottom: 10px;\n            display: flex;\n            /* 垂直居中 */\n            align-items: center;\n\n            .from {\n                font-size: 12px;\n                /* color: #999; */\n                margin-left: 10px;\n            }\n        }\n\n        .meta {\n            display: flex;\n            font-size: 12px;\n            line-height: 12px;\n            color: #999;\n            text-align: left;\n            margin-bottom: 10px;\n        }\n\n        .content {\n            max-width: 800px;\n            text-align: left;\n            font-size: 14px;\n            color: #333;\n            line-height: 1.4;\n\n            p {\n                margin-bottom: 6px;\n            }\n        }\n    }\n\n    .img-container {\n        display: flex;\n        /* align-items: center; */\n        align-items: flex-start;\n        /**水平剧中 */\n        /* justify-content: space-between; */\n        justify-content: space-around;\n\n        .img-item {\n            margin-right: 10px;\n\n            /* 最后一个元素margin-right为0*/\n            &:last-child {\n                margin-right: 0;\n            }\n\n            height: 100%;\n\n            &>img {\n                max-height: calc(80vh - 400px);\n                object-fit: cover;\n                border-radius: 5px;\n            }\n        }\n\n        .calender {\n            /* position: absolute; */\n            width: 130px;\n            height: 120px;\n            display: flex;\n            flex-direction: column;\n            top: 10px;\n            right: -200px;\n            margin: 4px;\n            padding: 4px;\n            background: rgba(255, 255, 255, 1);\n            border-radius: 5px;\n            color: #333;\n            font-size: 16px;\n            border-radius: 10px;\n            /* background: green; */\n\n            .year_month {\n                font-weight: bold;\n                margin-bottom: 4px;\n                color: #aaa;\n            }\n\n            .day-container {\n                display: flex;\n                justify-content: space-around;\n                align-items: center;\n                font-weight: bold;\n                line-height: 54px;\n\n                .date {\n                    font-weight: bold;\n                    font-size: 50px;\n                    background: #fff;\n                }\n\n                .day {\n                    /* background: red; */\n                    /* width: 30px; */\n                    font-size: 16px;\n                    writing-mode: vertical-rl;\n                    text-orientation: upright;\n                    line-height: 1.5;\n                    color: rgb(49, 205, 240);\n                }\n            }\n\n            .tech-nice {\n                display: flex;\n                justify-content: space-around;\n                color: #333;\n                font-size: 12px;\n                text-align: right;\n                margin-top: 4px;\n\n                .suitable {\n                    color: #666;\n                }\n\n                .page-icon {\n                    cursor: pointer;\n                    font-size: 100px;\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    font-size: 20px;\n                    color: #333;\n                    cursor: pointer;\n                }\n            }\n\n            .introduction {\n                position: absolute;\n                top: 140px;\n\n                border-radius: 10px;\n                text-align: justify;\n                height: 260px;\n                width: 110px;\n                margin-top: 10px;\n                font-size: 16px;\n                writing-mode: vertical-rl;\n                text-orientation: upright;\n                line-height: 2;\n                color: #888;\n            }\n        }\n\n    }\n}\n\n.card-fade-enter-from,\n.card-fade-leave-to {\n    transform: translateX(20px);\n    opacity: 0;\n}\n\n.card-fade-enter-active {\n    transition: all 0.9s ease-out;\n}\n\n.card-fade-leave-active {\n    transition: all 1.0s cubic-bezier(1, 0.5, 0.8, 1);\n}\n</style>","const styleConfig = {\n    \"timeline\": {},\n    \"earth\": {\n        \"ocean-color\": \"rgb(95,173,209)\",\n        \"land-color\": \"rgb(180,225,205)\",\n        \"country-color\": \"#fff\",\n        \"country-border\": 0.6,\n        \"background\": \"@/assets/background4.jpg\",\n        \"globe-size\": 1000\n    }\n}\n\nexport default styleConfig;","<template>\n    <div class=\"earth\">\n        <div id=\"globe-container\" class=\"globe-container\">\n            <transition name=\"globe-fade\">\n                <div id=\"globe\" v-show=\"!cardShow\"></div>\n            </transition>\n        </div>\n        <card-news :cardShow=\"cardShow\"></card-news>\n    </div>\n</template>\n\n<script setup lang='ts'>\nimport * as d3 from 'd3';\nimport { onMounted, computed, render, h, reactive, ref } from 'vue';\nimport { useStore } from 'vuex';\nimport { EnvironmentTwoTone } from '@ant-design/icons-vue';\nimport CardNews from '@/components/cards/cardNews.vue';\nimport styleConfig from '@/../config/styleConfig.ts';\n\nlet cardShow = ref(false)\nconst store = useStore();\nconst OCEANCOLOR = styleConfig['earth']['ocean-color']\nconst LANDCOLOR = styleConfig['earth']['land-color']\nconst COUNTRYCOLOR = styleConfig['earth']['country-color']\nconst COUNTRYBORDER = styleConfig['earth']['country-border']\nconst SIZE = styleConfig['earth']['globe-size']\nconst X_OFFSET = SIZE / 2\nconst Y_OFFSET = SIZE / 2\nlet lat_offset = 0\nlet lng_offset = 0\n\nonMounted(() => {\n    const projection = d3.geoOrthographic()\n        .scale(SIZE / 2 - 0.5)\n        .translate([X_OFFSET, Y_OFFSET])\n    const path = d3.geoPath().projection(projection);\n    const svg = d3.select(\"#globe\")\n        .append(\"svg\")\n        .attr(\"width\", SIZE)\n        .attr(\"height\", SIZE)\n        .style(\"background-color\", OCEANCOLOR)\n        .style('border-radius', '50%')\n\n    d3.json('/world.json')\n        .then(data => {\n\n            svg.append(\"g\")\n                .selectAll(\"path\")\n                .data(data['features'])\n                .enter()\n                .append(\"path\")\n                .attr(\"d\", path)\n                .attr(\"fill\", LANDCOLOR)\n                .attr(\"stroke\", COUNTRYCOLOR)\n                .attr(\"stroke-width\", COUNTRYBORDER);\n\n            centerPosition(svg, projection, path, {\n                location: [116, 39],\n                preLocation: [116, 39]\n            }, false);\n\n            store.subscribe((mutation, state) => {\n                if (mutation.type === 'content/updateContent') {\n                    state = state.content\n                    centerPosition(svg, projection, path, state);\n                }\n            });\n        })\n});\n\nconst centerPosition = (svg, projection, path, state, animate = true) => {\n    const locationName = state.locationName;\n    const longitude = state.location[0];\n    const latitude = state.location[1];\n    // const preLocationName = state.preLocationName;\n    const preLongitude = state.preLocation[0]\n    const preLatitude = state.preLocation[1]\n    const pointStart = [lng_offset - preLongitude, lat_offset - preLatitude]\n    const pointEnd = [lng_offset - longitude, lat_offset - latitude]\n\n    cardShow.value = false\n    svg.selectAll('foreignObject').remove();\n    let arcPath = null;\n    let arcIcon = null\n    const arcIconSize = 20;\n    let duration = 2500;\n    if (!animate) {\n        duration = 10;\n    }\n    const locate2position = () => {\n        const greatArcPoints = []\n        svg.transition()\n            .duration(duration) // 设置动画持续时间为 2 秒\n            .tween(\"rotate\", () => {\n                const interpolateRotation = d3.interpolate(pointStart, pointEnd);\n                return function (t) {\n                    if (arcPath) {\n                        arcPath.remove()\n                        arcIcon.remove()\n                    }\n                    projection.rotate(interpolateRotation(t));\n                    svg.selectAll(\"path\").attr(\"d\", path);\n                    const end0 = -pointStart[0] * (1 - t) - pointEnd[0] * t\n                    const end1 = -pointStart[1] * (1 - t) - pointEnd[1] * t\n                    if (greatArcPoints.length === 0) {\n                        greatArcPoints.push([[-pointStart[0], -pointStart[1]], [end0, end1]])\n                    } else {\n                        const oldPoint = greatArcPoints[greatArcPoints.length - 1][1]\n                        greatArcPoints.push([oldPoint, [end0, end1]])\n                    }\n\n                    const greatArc = {\n                        type: \"MultiLineString\",\n                        coordinates: greatArcPoints\n                    };\n                    let c_r = 5 * (1 - t) + 158\n                    let c_g = 5 * t + 35\n                    let c_b = 234\n\n                    const defs = svg.append(\"defs\");\n                    const linearGradient = defs.append(\"linearGradient\")\n                        .attr(\"id\", \"myGradient\")\n                        .attr(\"x1\", \"0%\")\n                        .attr(\"y1\", \"0%\")\n                        .attr(\"x2\", \"100%\")\n                        .attr(\"y2\", \"100%\")\n\n                    linearGradient.append(\"stop\")\n                        .attr(\"offset\", \"0%\")\n                        .attr(\"stop-color\", `rgb(255, 255, 0)`)\n\n                    linearGradient.append(\"stop\")\n                        .attr(\"offset\", \"100%\")\n                        .attr(\"stop-color\", `rgb(255, 0, 0)`)\n\n                    arcPath = svg.append(\"path\")\n                        .attr(\"d\", path(greatArc))\n                        // .attr(\"stroke\", `rgba(${c_r}, ${c_g}, ${c_b}, ${1 - t ** 10 + 0.01})`)\n                        .attr(\"stroke\", \"url(#myGradient)\")\n                        .attr(\"stroke-width\", 2)\n                        .attr(\"stroke-opacity\", 1 - t ** 10 + 0.01)\n                    let [offsetX, offsetY] = projection.translate()\n\n                    arcIcon = svg.append('circle')\n                        .attr('cx', offsetX)\n                        .attr('cy', offsetY)\n                        .attr('r', 3)\n                        .attr('fill', `rgba(255, 255, 255, ${1 - t ** 10 + 0.01})`)\n                        .attr('stroke', `rgba(${c_r}, ${c_g}, ${c_b}, ${1 - t ** 10 + 0.01})`)\n                        .attr(\"stroke-width\", 1.5)\n\n                };\n            })\n            .on(\"end\", () => {\n                createMarker(svg, projection, path, pointEnd, locationName);\n                if (arcPath) {\n                    arcPath.remove()\n                    arcIcon.remove()\n                }\n                setTimeout(() => {\n                    if (animate) {\n                        cardShow.value = true\n                    }\n                }, 1500)\n            });\n    }\n    locate2position()\n}\n\nconst createMarker = (svg, projection, path, point, locationName = '') => {\n    const longitude = point[0];\n    const latitude = point[1];\n    const [x, y] = projection([lng_offset - longitude, lat_offset - latitude]);\n    let [offsetX, offsetY] = projection.translate()\n    offsetX = offsetX - SIZE / 2;\n    offsetY = offsetY - SIZE / 2\n    const iconSize = 30\n    svg.append(\"foreignObject\")\n        .attr(\"x\", x + offsetX - iconSize / 2)\n        .attr(\"y\", y + offsetY - iconSize)\n        .attr(\"width\", iconSize)\n        .attr(\"height\", iconSize)\n        .html(\"<div id='marker'></div>\");\n    svg.append(\"foreignObject\")\n        .attr(\"x\", x + offsetX - iconSize * 4 / 2)\n        .attr(\"y\", y + offsetY)\n        .attr(\"width\", iconSize * 4)\n        .attr(\"height\", iconSize)\n        .html(`<div id='city' style='display:inline-block; white-space: nowrap; font-size:12px; color:rgba(0, 0, 0, 1);'>${locationName}</div>`);\n    svg.selectAll(\"path\").attr(\"d\", path);\n    const container = document.getElementById('marker');\n    const icon = h(EnvironmentTwoTone, { spin: false, rotate: 0, style: { fontSize: '30px' } });\n    render(icon, container);\n}\n</script>\n\n<style scoped>\n.earth {\n    position: absolute;\n    width: 100%;\n    height: calc(100vh - 200px);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    overflow: hidden;\n\n    .globe-container {\n        top: 0px;\n        position: absolute;\n        min-width: 100%;\n        max-width: 100%;\n        padding: 0 20% 0 0;\n        height: calc(100vh - 220px);\n        overflow: hidden;\n        z-index: -1;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background-image: url('@/assets/background.jpg');\n        background-size: cover;\n        background-position: center;\n\n        .globe-fade-enter-active {\n            transition: all 1.0s ease-out;\n        }\n\n        .globe-fade-leave-active {\n            transition: all 0.9s cubic-bezier(1, 0.5, 0.8, 1);\n        }\n\n        .globe-fade-enter-from,\n        .globe-fade-leave-to {\n            transform: translateX(20px);\n            opacity: 0;\n        }\n    }\n}\n</style>","\nimport { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router'\nimport map from '@/views/map.vue';\n\nconst routes: Array<RouteRecordRaw> = [\n    { path: \"/\", redirect: \"/timemap\" },\n    {\n        path: '/timemap',\n        name: 'timemap',\n        component: map\n    },\n];\n\nconst router = createRouter({\n    history: createWebHistory(),\n    routes\n});\n\nexport default router;","import { createApp } from 'vue'\nimport Antd from 'ant-design-vue'\nimport App from '@/App.vue'\nimport 'ant-design-vue/dist/reset.css'\nimport '@/style.css'\nimport {TimelineFlag, TimelineDrag} from '@/components/timeline/directives.ts'\nimport store from '@/store/store.ts';\nimport router from '@/router/router.ts';\n\nconst app = createApp(App);\napp.directive('TimelineFlag', TimelineFlag)\napp.directive('TimelineDrag', TimelineDrag)\n\napp.use(router)\napp.use(store)\napp.use(Antd)\napp.mount('#app');\n\n"],"names":["renderFlag","el","binding","flag","timeline","refreshFlag","index","marker","zIndex","TimelineFlag","TimelineDrag","content","state","data","location","locationName","msgType","updateData","store","createStore","_imports_0","config","devConfig","prodConfig","getConfig","request","axios","errorHandler","error","response","getTimeline","timelineConfig","ONEDAYMILLSECONDS","renderTimeline","timelineData","container","flags","offset","item","days","baseDay","daysInterval","radius","rulerMarkers","i","_rulerMarker","timeType","dateObj","year","month","day","time","baseTime","row1","row2","rows","row","flag1","flag2","date1","date2","start","timeDifference","date","timeWidth","recordedChunks","mediaRecorder","stream","recordVideo","MediaRecorder","event","stopRecordVideo","resolve","blob","url","downloadLink","track","ANIMATEDURATION","router","useRouter","ref","useStore","rt","playing","onMounted","getTimelineData","updateTimelineData","renderFlags","clickFlag","goToFlag","toolClick","type","play","orderFlags","playOrder","element","b","flagIndex","duration","preloadImages","urlList","reject","img","tpl","preloadList","mutation","props","__props","cardInfo","reactive","getDate","suitable","today","yearMonth","turnPage","message","watch","newVal","origin","styleConfig","cardShow","OCEANCOLOR","LANDCOLOR","COUNTRYCOLOR","COUNTRYBORDER","SIZE","X_OFFSET","Y_OFFSET","lat_offset","lng_offset","projection","d3.geoOrthographic","path","d3.geoPath","svg","d3.select","d3.json","centerPosition","animate","longitude","latitude","preLongitude","preLatitude","pointStart","pointEnd","arcPath","arcIcon","greatArcPoints","interpolateRotation","d3.interpolate","t","end0","end1","oldPoint","greatArc","c_r","c_g","c_b","linearGradient","offsetX","offsetY","createMarker","point","x","y","iconSize","icon","h","EnvironmentTwoTone","render","routes","map","createRouter","createWebHistory","app","createApp","App","Antd"],"mappings":"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"}